# - name: Deploy Kubernetes Dashboard Ingress
#   kubernetes.core.k8s:
#     state: present
#     definition: "{{ lookup('template', 'roles/dashboard/templates/dashboard-ingress.yaml.j2') }}"

- name: Deploy Kubernetes Dashboard
  kubernetes.core.k8s:
    state: present
    definition: |
      apiVersion: v1
      kind: Namespace
      metadata:
        name: kubernetes-dashboard

- name: Apply Dashboard Ingress
  template:
    src: dashboard-ingress.yaml.j2
    dest: /tmp/dashboard-ingress.yaml

- name: Apply ingress in cluster
  kubernetes.core.k8s:
    state: present
    src: /tmp/dashboard-ingress.yaml
